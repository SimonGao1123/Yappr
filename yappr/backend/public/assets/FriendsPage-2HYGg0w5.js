import{r as u,j as e}from"./index-DbWMcd_d.js";function x({currentFriends:d,outgoingFriendReq:a,incomingFriendReq:o,currentUser:c,ifLightMode:r}){const[n,s]=u.useState("");return e.jsx(e.Fragment,{children:e.jsxs("main",{id:"friends-main",className:r?"":"dark-mode",children:[e.jsx(m,{searchBarInput:n,setSearchBarInput:s,currentUser:c,ifLightMode:r}),e.jsx(h,{currentFriends:d,ifLightMode:r}),e.jsxs("div",{id:"friends-right-column",children:[e.jsx(j,{outgoingFriendReq:a,ifLightMode:r}),e.jsx(f,{incomingFriendReq:o,ifLightMode:r})]})]})})}function m({searchBarInput:d,setSearchBarInput:a,currentUser:o,ifLightMode:c}){const[r,n]=u.useState("");function s(i){i.preventDefault(),fetch("/friends/sendFriendRequest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sender_id:o.id,receiver_id:d})}).then(async t=>{const l=await t.json();n(l.message)}).catch(t=>{console.log(t)}),a("")}return e.jsx(e.Fragment,{children:e.jsxs("form",{id:"add-friend-form",className:c?"":"dark-mode",onSubmit:s,children:[e.jsxs("div",{id:"friend-search-container",children:[e.jsx("input",{id:"user-search-bar",className:c?"":"dark-mode",maxLength:30,type:"text",placeholder:"Search Username/ID",value:d,onChange:i=>a(i.target.value)}),e.jsx("button",{type:"submit",id:"send-req-btn",className:c?"":"dark-mode",children:"Send Friend Request"})]}),e.jsx("p",{id:"display-msg",className:c?"":"dark-mode",children:r})]})})}function h({currentFriends:d,ifLightMode:a}){const o=[];function c(r,n){fetch("/friends/unfriend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({friend_id:r,other_user_username:n})}).then(async s=>{const i=await s.json();console.log(i.message)}).catch(s=>{console.log(s)})}for(let r=0;r<d.length;r++){const n=d[r];n&&o.push(e.jsxs("li",{className:`friends-li ${a?"":"dark-mode"}`,children:[n.username," ID: ",n.user_id,e.jsx("button",{className:`unfriend-btn ${a?"":"dark-mode"}`,onClick:()=>c(n.friend_id,n.username),children:" Unfriend "})]},n.friend_id))}return e.jsxs("div",{id:"current-friends-list",className:a?"":"dark-mode",children:[e.jsx("h1",{className:`friends-header ${a?"":"dark-mode"}`,children:"Current Friends:"}),e.jsx("ul",{children:o})]})}function j({outgoingFriendReq:d,ifLightMode:a}){function o(r,n,s){fetch("/friends/cancel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({friend_id:r,receiver_id:n,receiver_username:s})}).then(async i=>{const t=await i.json();console.log(t.message)}).catch(i=>{console.log(i)})}const c=[];for(let r=0;r<d.length;r++){const n=d[r];n&&c.push(e.jsxs("li",{className:`friends-li ${a?"":"dark-mode"}`,children:[n.username," ID: ",n.user_id,e.jsx("button",{className:`cancel-req-btn ${a?"":"dark-mode"}`,onClick:()=>o(n.friend_id,n.user_id,n.username),children:" Cancel "})]},n.friend_id))}return e.jsxs("div",{id:"outgoing-req-list",className:a?"":"dark-mode",children:[e.jsx("h1",{className:`friends-header ${a?"":"dark-mode"}`,children:"Outgoing Requests:"}),e.jsx("ul",{children:c})]})}function f({incomingFriendReq:d,ifLightMode:a}){function o(n,s,i){fetch("/friends/reject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({friend_id:n,sender_id:i,sender_username:s})}).then(async t=>{const l=await t.json();console.log(l.message)}).catch(t=>{console.log(t)})}function c(n,s,i){fetch("/friends/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({friend_id:n,sender_id:i,sender_username:s})}).then(async t=>{const l=await t.json();console.log(l.message)}).catch(t=>{console.log(t)})}const r=[];for(let n=0;n<d.length;n++){const s=d[n];s&&r.push(e.jsxs("li",{className:`friends-li ${a?"":"dark-mode"}`,children:[s.username," ID: ",s.user_id,e.jsxs("div",{className:"incoming-friends-btn-container",children:[e.jsx("button",{className:`reject-req-btn ${a?"":"dark-mode"}`,onClick:()=>o(s.friend_id,s.username,s.user_id),children:" Reject "}),e.jsx("button",{className:`accept-req-btn ${a?"":"dark-mode"}`,onClick:()=>c(s.friend_id,s.username,s.user_id),children:" Accept "})]})]},s.friend_id))}return e.jsxs("div",{id:"incoming-req-list",className:a?"":"dark-mode",children:[e.jsx("h1",{className:`friends-header ${a?"":"dark-mode"}`,children:"Incoming Requests:"}),e.jsx("ul",{children:r})]})}export{x as default};
