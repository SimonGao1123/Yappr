import{r as u,j as s}from"./index-B_id87nB.js";import{u as o,c as j,r as x,a as h}from"./FriendsFunctions-DXfdf5lc.js";function _({currentFriends:d,outgoingFriendReq:n,incomingFriendReq:a,currentUser:r,ifLightMode:e}){const[i,c]=u.useState("");return s.jsx(s.Fragment,{children:s.jsxs("main",{id:"friends-main",className:e?"":"dark-mode",children:[s.jsx(f,{searchBarInput:i,setSearchBarInput:c,currentUser:r,ifLightMode:e}),s.jsx(p,{currentFriends:d,ifLightMode:e}),s.jsxs("div",{id:"friends-right-column",children:[s.jsx(k,{outgoingFriendReq:n,ifLightMode:e}),s.jsx(N,{incomingFriendReq:a,ifLightMode:e})]})]})})}function f({searchBarInput:d,setSearchBarInput:n,currentUser:a,ifLightMode:r}){const[e,i]=u.useState("");function c(t){t.preventDefault(),fetch("/api/friends/sendFriendRequest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sender_id:a.id,receiver_id:d})}).then(async l=>{const m=await l.json();i(m.message)}).catch(l=>{console.log(l)}),n("")}return s.jsx(s.Fragment,{children:s.jsxs("form",{id:"add-friend-form",className:r?"":"dark-mode",onSubmit:c,children:[s.jsxs("div",{id:"friend-search-container",children:[s.jsx("input",{id:"user-search-bar",className:r?"":"dark-mode",maxLength:30,type:"text",placeholder:"Search Username/ID",value:d,onChange:t=>n(t.target.value)}),s.jsx("button",{type:"submit",id:"send-req-btn",className:r?"":"dark-mode",children:"Send Friend Request"})]}),s.jsx("p",{id:"display-msg",className:r?"":"dark-mode",children:e})]})})}function p({currentFriends:d,ifLightMode:n}){const a=[];for(let r=0;r<d.length;r++){const e=d[r];e&&a.push(s.jsxs("li",{className:`friends-li ${n?"":"dark-mode"}`,children:[e.username," ID: ",e.user_id,s.jsx("button",{className:`unfriend-btn ${n?"":"dark-mode"}`,onClick:()=>o(e.friend_id,e.username),children:" Unfriend "})]},e.friend_id))}return s.jsxs("div",{id:"current-friends-list",className:n?"":"dark-mode",children:[s.jsx("h1",{className:`friends-header ${n?"":"dark-mode"}`,children:"Current Friends:"}),s.jsx("ul",{children:a})]})}function k({outgoingFriendReq:d,ifLightMode:n}){const a=[];for(let r=0;r<d.length;r++){const e=d[r];e&&a.push(s.jsxs("li",{className:`friends-li ${n?"":"dark-mode"}`,children:[e.username," ID: ",e.user_id,s.jsx("button",{className:`cancel-req-btn ${n?"":"dark-mode"}`,onClick:()=>j(e.friend_id,e.user_id,e.username),children:" Cancel "})]},e.friend_id))}return s.jsxs("div",{id:"outgoing-req-list",className:n?"":"dark-mode",children:[s.jsx("h1",{className:`friends-header ${n?"":"dark-mode"}`,children:"Outgoing Requests:"}),s.jsx("ul",{children:a})]})}function N({incomingFriendReq:d,ifLightMode:n}){const a=[];for(let r=0;r<d.length;r++){const e=d[r];e&&a.push(s.jsxs("li",{className:`friends-li ${n?"":"dark-mode"}`,children:[e.username," ID: ",e.user_id,s.jsxs("div",{className:"incoming-friends-btn-container",children:[s.jsx("button",{className:`reject-req-btn ${n?"":"dark-mode"}`,onClick:()=>x(e.friend_id,e.username,e.user_id),children:" Reject "}),s.jsx("button",{className:`accept-req-btn ${n?"":"dark-mode"}`,onClick:()=>h(e.friend_id,e.username,e.user_id),children:" Accept "})]})]},e.friend_id))}return s.jsxs("div",{id:"incoming-req-list",className:n?"":"dark-mode",children:[s.jsx("h1",{className:`friends-header ${n?"":"dark-mode"}`,children:"Incoming Requests:"}),s.jsx("ul",{children:a})]})}export{_ as default};
