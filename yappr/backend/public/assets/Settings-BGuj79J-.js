import{j as s,L as u,r}from"./index-CKNt4adz.js";function N({setCurrentUser:e,setLoginStatus:a,setDisplayIndex:t,currentUser:n,ifLightMode:o,setIfLightMode:i}){return s.jsxs("main",{id:"settings-main",className:o?"":"dark-mode",children:[s.jsx(h,{setCurrentUser:e,currentUser:n,ifLightMode:o}),s.jsx(k,{currentUser:n,ifLightMode:o}),s.jsx(j,{ifLightMode:o,setIfLightMode:i,currentUser:n}),s.jsx(u,{to:"/",onClick:()=>x(e,a,t),id:"logout-btn",className:o?"":"dark-mode",children:"Logout"})]})}function h({currentUser:e,ifLightMode:a,setCurrentUser:t}){const[n,o]=r.useState(""),[i,d]=r.useState(e.username);return s.jsxs("div",{className:a?"":"dark-mode",id:"update-username-section",children:[s.jsx("h2",{className:a?"":"dark-mode",children:"Update Username"}),s.jsx("input",{className:a?"":"dark-mode",id:"update-username-input",type:"text",maxLength:30,value:i,onChange:m=>d(m.target.value)}),s.jsx("button",{id:"update-username-btn",onClick:()=>g(e,e.id,i,o,t),children:"Update"}),s.jsx("p",{id:"display-msg-update-username-input",children:n})]})}function g(e,a,t,n,o){fetch("/api/userLogins/updateUsername",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e.username,user_id:a,newUsername:t})}).then(async i=>{const d=await i.json();n(d.message),d.success&&d.user&&o(d.user),console.log(d)}).catch(i=>{console.log(i)})}function j({ifLightMode:e,setIfLightMode:a,currentUser:t}){return t?s.jsxs("div",{id:"light-mode-toggle",className:e?"":"dark-mode",children:[s.jsx("h2",{className:e?"":"dark-mode",children:"Theme"}),s.jsxs("div",{id:"theme-options",children:[s.jsxs("label",{htmlFor:"dark-mode-radio",className:e?"":"dark-mode",children:[s.jsx("input",{type:"radio",id:"dark-mode-radio",className:e?"":"dark-mode",checked:!e,onChange:()=>p(a,!1,t.id)}),"Dark Mode"]}),s.jsxs("label",{htmlFor:"light-mode-radio",className:e?"":"dark-mode",children:[s.jsx("input",{type:"radio",id:"light-mode-radio",className:e?"":"dark-mode",checked:e,onChange:()=>p(a,!0,t.id)}),"Light Mode"]})]})]}):null}function p(e,a,t){fetch("/api/settings/switchLightDarkMode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ifLightMode:a,user_id:t})}).then(async n=>{const o=await n.json();console.log(o)}).catch(n=>{console.log(n)}),e(a)}function x(e,a,t){fetch("/api/api/userLogins/logout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then(async n=>{const o=await n.json();console.log(o)}).catch(n=>{console.log("Error in logging out of session",n)}),e(null),a(!0),t(0)}function k({currentUser:e,ifLightMode:a}){const[t,n]=r.useState(""),[o,i]=r.useState("");function d(){e&&fetch("/api/settings/setDescription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.id,description:t})}).then(async c=>{const l=await c.json();i(l.message)}).catch(c=>{console.log(c)})}function m(){e&&fetch(`/api/settings/getDescription/${e.id}`,{method:"GET"}).then(async c=>{const l=await c.json();if(!l.success){console.log(l.message);return}l.desc&&n(l.desc)}).catch(c=>{console.log(c)})}return r.useEffect(()=>{e?.id&&m()},[e?.id]),s.jsxs("div",{id:"description-alter-section",className:a?"":"dark-mode",children:[s.jsx("h2",{className:a?"":"dark-mode",children:"Update Description"}),s.jsx("textarea",{placeholder:"Description",id:"description",className:a?"":"dark-mode",value:t,onChange:c=>n(c.target.value)}),s.jsx("button",{id:"update-description-btn",className:a?"":"dark-mode",onClick:()=>d(),children:"Update"}),s.jsx("p",{id:"display-description-msg",className:a?"":"dark-mode",children:o})]})}export{N as default};
