import{r as u,j as e}from"./index-CKNt4adz.js";function x({currentFriends:i,outgoingFriendReq:a,incomingFriendReq:o,currentUser:d,ifLightMode:r}){const[n,s]=u.useState("");return e.jsx(e.Fragment,{children:e.jsxs("main",{id:"friends-main",className:r?"":"dark-mode",children:[e.jsx(m,{searchBarInput:n,setSearchBarInput:s,currentUser:d,ifLightMode:r}),e.jsx(h,{currentFriends:i,ifLightMode:r}),e.jsxs("div",{id:"friends-right-column",children:[e.jsx(p,{outgoingFriendReq:a,ifLightMode:r}),e.jsx(j,{incomingFriendReq:o,ifLightMode:r})]})]})})}function m({searchBarInput:i,setSearchBarInput:a,currentUser:o,ifLightMode:d}){const[r,n]=u.useState("");function s(c){c.preventDefault(),fetch("/api/friends/sendFriendRequest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sender_id:o.id,receiver_id:i})}).then(async t=>{const l=await t.json();n(l.message)}).catch(t=>{console.log(t)}),a("")}return e.jsx(e.Fragment,{children:e.jsxs("form",{id:"add-friend-form",className:d?"":"dark-mode",onSubmit:s,children:[e.jsxs("div",{id:"friend-search-container",children:[e.jsx("input",{id:"user-search-bar",className:d?"":"dark-mode",maxLength:30,type:"text",placeholder:"Search Username/ID",value:i,onChange:c=>a(c.target.value)}),e.jsx("button",{type:"submit",id:"send-req-btn",className:d?"":"dark-mode",children:"Send Friend Request"})]}),e.jsx("p",{id:"display-msg",className:d?"":"dark-mode",children:r})]})})}function h({currentFriends:i,ifLightMode:a}){const o=[];function d(r,n){fetch("/api/friends/unfriend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({friend_id:r,other_user_username:n})}).then(async s=>{const c=await s.json();console.log(c.message)}).catch(s=>{console.log(s)})}for(let r=0;r<i.length;r++){const n=i[r];n&&o.push(e.jsxs("li",{className:`friends-li ${a?"":"dark-mode"}`,children:[n.username," ID: ",n.user_id,e.jsx("button",{className:`unfriend-btn ${a?"":"dark-mode"}`,onClick:()=>d(n.friend_id,n.username),children:" Unfriend "})]},n.friend_id))}return e.jsxs("div",{id:"current-friends-list",className:a?"":"dark-mode",children:[e.jsx("h1",{className:`friends-header ${a?"":"dark-mode"}`,children:"Current Friends:"}),e.jsx("ul",{children:o})]})}function p({outgoingFriendReq:i,ifLightMode:a}){function o(r,n,s){fetch("/api/friends/cancel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({friend_id:r,receiver_id:n,receiver_username:s})}).then(async c=>{const t=await c.json();console.log(t.message)}).catch(c=>{console.log(c)})}const d=[];for(let r=0;r<i.length;r++){const n=i[r];n&&d.push(e.jsxs("li",{className:`friends-li ${a?"":"dark-mode"}`,children:[n.username," ID: ",n.user_id,e.jsx("button",{className:`cancel-req-btn ${a?"":"dark-mode"}`,onClick:()=>o(n.friend_id,n.user_id,n.username),children:" Cancel "})]},n.friend_id))}return e.jsxs("div",{id:"outgoing-req-list",className:a?"":"dark-mode",children:[e.jsx("h1",{className:`friends-header ${a?"":"dark-mode"}`,children:"Outgoing Requests:"}),e.jsx("ul",{children:d})]})}function j({incomingFriendReq:i,ifLightMode:a}){function o(n,s,c){fetch("/api/friends/reject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({friend_id:n,sender_id:c,sender_username:s})}).then(async t=>{const l=await t.json();console.log(l.message)}).catch(t=>{console.log(t)})}function d(n,s,c){fetch("/api/friends/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({friend_id:n,sender_id:c,sender_username:s})}).then(async t=>{const l=await t.json();console.log(l.message)}).catch(t=>{console.log(t)})}const r=[];for(let n=0;n<i.length;n++){const s=i[n];s&&r.push(e.jsxs("li",{className:`friends-li ${a?"":"dark-mode"}`,children:[s.username," ID: ",s.user_id,e.jsxs("div",{className:"incoming-friends-btn-container",children:[e.jsx("button",{className:`reject-req-btn ${a?"":"dark-mode"}`,onClick:()=>o(s.friend_id,s.username,s.user_id),children:" Reject "}),e.jsx("button",{className:`accept-req-btn ${a?"":"dark-mode"}`,onClick:()=>d(s.friend_id,s.username,s.user_id),children:" Accept "})]})]},s.friend_id))}return e.jsxs("div",{id:"incoming-req-list",className:a?"":"dark-mode",children:[e.jsx("h1",{className:`friends-header ${a?"":"dark-mode"}`,children:"Incoming Requests:"}),e.jsx("ul",{children:r})]})}export{x as default};
